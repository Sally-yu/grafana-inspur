{"version":3,"sources":["../src/AJAX_ctrl.js"],"names":["MetricsPanelCtrl","_","IframeRender","panelDefaults","backgroundColor","itemNormalColor","itemBorderColor","itemEmphasisColor","labelColor","labelEmphasisColor","dataColors","thresholds","thresholdTextColor","unit","AJAXCtrl","$scope","$injector","$sce","defaults","panel","events","on","onDataReceived","bind","onInitEditMode","onPanelInitalized","dataList","console","log","updateIframe","addEditorTab","pluginId","render","updateTemplate","$","window","debounce","refresh","scope","elem","attrs","ctrl","sce","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,sB,kBAAAA,gB;;AACFC,O;;AACAC,kB;;;;;;;;;;;;;;;;;;;;;AAEDC,mB,GAAgB;AACpBC,yBAAiB,SADG;AAEpBC,yBAAiB,SAFG;AAGpBC,yBAAiB,SAHG;AAIpBC,2BAAmB,SAJC;AAKpBC,oBAAY,SALQ;AAMpBC,4BAAoB,SANA;AAOpBC,oBAAY,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,CAPQ;AAQpBC,oBAAY,MARQ;AASpBC,4BAAoB,SATA;AAUpBC,cAAM;AAVc,O;;0BAcTC,Q;;;AAEX,0BAAYC,MAAZ,EAAoBC,SAApB,EAA8BC,IAA9B,EAAoC;AAAA;;AAAA,0HAE5BF,MAF4B,EAEpBC,SAFoB,EAETC,IAFS;;AAGlChB,YAAEiB,QAAF,CAAW,MAAKC,KAAhB,EAAuBhB,aAAvB;AACA,gBAAKiB,MAAL,CAAYC,EAAZ,CAAe,eAAf,EAAgC,MAAKC,cAAL,CAAoBC,IAApB,OAAhC;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKG,cAAL,CAAoBD,IAApB,OAAjC;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,mBAAf,EAAoC,MAAKI,iBAAL,CAAuBF,IAAvB,OAApC;AANkC;AAOnC;;;;yCAEcG,Q,EAAU;AACvBC,oBAAQC,GAAR,CAAY,WAAZ;AACA,iBAAKC,YAAL;AACD;;;2CAEgB;AACfF,oBAAQC,GAAR,CAAY,YAAZ;AACA,iBAAKE,YAAL,CAAkB,SAAlB,EAA6B,oBAAkB,KAAKC,QAAvB,GAAgC,cAA7D,EAA6E,CAA7E,EAFe,CAEmE;AACnF;;;yCAEa;AACZJ,oBAAQC,GAAR,CAAY,cAAZ;;AAEA,iBAAKI,MAAL;AACD;;;8CAEmB;AAAA;;AAClB,iBAAKC,cAAL;AACAC,cAAEC,MAAF,EAAUd,EAAV,CACE,QADF,EAEEpB,EAAEmC,QAAF,CAAW,cAAM;AACf,qBAAKC,OAAL;AACD,aAFD,EAEG,GAFH,CAFF;AAMD;;;+BAEIC,K,EAAOC,I,EAAMC,K,EAAOC,I,EAAKC,G,EAAK;AACjCf,oBAAQC,GAAR,CAAY,MAAZ;AACA1B,yBAAaoC,KAAb,EAAoBC,IAApB,EAA0BC,KAA1B,EAAiCC,IAAjC;AACD;;;;QAxC2BzC,gB;;;;AA0C9Bc,eAAS6B,WAAT,GAAuB,aAAvB","file":"AJAX_ctrl.js","sourcesContent":["import { MetricsPanelCtrl } from 'app/plugins/sdk';\nimport _ from 'lodash';\nimport IframeRender from './render';\n\nconst panelDefaults = {\n  backgroundColor: '#63696e',\n  itemNormalColor: '#2d3339',\n  itemBorderColor: '#404a59',\n  itemEmphasisColor: '#2a333d',\n  labelColor: '#f5f5f5',\n  labelEmphasisColor: '#f5896b',\n  dataColors: ['#83fa52', '#f6630e', '#f60e48'],\n  thresholds: '0,10',\n  thresholdTextColor: '#f5f5f5',\n  unit: 'ms'\n};\n\n\nexport class AJAXCtrl extends MetricsPanelCtrl {\n\n  constructor($scope, $injector,$sce) {\n    \n    super($scope, $injector ,$sce);\n    _.defaults(this.panel, panelDefaults);\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('panel-initialized', this.onPanelInitalized.bind(this));\n  }\n\n  onDataReceived(dataList) {\n    console.log('onDataRec');\n    this.updateIframe();\n  }\n\n  onInitEditMode() {\n    console.log('onInitEdit');\n    this.addEditorTab('Options', 'public/plugins/'+this.pluginId+'/editor.html', 2);  //使用plugins.json中的ID找html\n  }\n\n  updateIframe(){\n    console.log('UpdateIframe');  \n\n    this.render();\n  }\n\n  onPanelInitalized() {\n    this.updateTemplate();\n    $(window).on(\n      'resize',\n      _.debounce(fn => {\n        this.refresh();\n      }, 150)\n    );\n  }\n\n  link(scope, elem, attrs, ctrl,sce) {\n    console.log('Link');\n    IframeRender(scope, elem, attrs, ctrl);\n  }\n}\nAJAXCtrl.templateUrl = 'module.html';"]}