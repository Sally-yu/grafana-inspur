{"version":3,"sources":["../src/EchartRender.js"],"names":["link","scope","elem","attrs","ctrl","container","find","events","on","render","renderingCompleted","codetText","panel","code","chartMode","ChartMode","decimal","postion","position","orient","data","map","echarts","registerTheme","dark","init","console","log","JSON","stringify","lastData","allData","legend","length","forEach","serie","lastPoint","datapoints","lastValue","_","isArray","parseFloat","toFixed","lastTime","target","push","valueList","timeList","tempValue","tempTime","kv","Date","toLocaleString","pieSer","value","name","lineSer","i","tempDic","type","stack","areaStyle","values","label","normal","show","showLabel","optionPie","title","text","subtext","x","tooltip","trigger","formatter","left","selected","series","radius","center","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","optionLine","textStyle","color","axisPointer","backgroundColor","grid","right","bottom","containLabel","toolbox","feature","saveAsImage","xAxis","boundaryGap","yAxis","optionRadar","radar","indicator","max","optionMap","optionBar","optionCus","parse","option","clear","setOption","opts","width","height","silent","resize","$"],"mappings":"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","file":"EchartRender.js","sourcesContent":["import echarts from './lib/echarts.min';\r\nimport _ from 'lodash';\r\nimport dark from './lib/dark';\r\nimport $ from 'jquery';\r\n\r\nexport default function link(scope, elem, attrs, ctrl, ) {\r\n    const container = elem.find('.echarts-panel');\r\n    ctrl.events.on('render', () => {\r\n        render();\r\n        ctrl.renderingCompleted();\r\n    });\r\n\r\n\r\n    function render() {\r\n        const codetText = ctrl.panel.code;\r\n        const chartMode = ctrl.panel.ChartMode;//echarts图类型，线饼雷达等\r\n        const decimal = ctrl.panel.decimal;//保留小数位\r\n        const postion=ctrl.panel.position;//饼图legend位置\r\n        const orient=ctrl.panel.orient//饼图legend方向\r\n\r\n\r\n\r\n        if (!ctrl.data) return;\r\n\r\n        if (!ctrl.map) {\r\n        }\r\n\r\n\r\n        // console.log('dark:'+JSON.stringify(dark));//json格式，当变量写入到js文件中读取，\r\n\r\n        echarts.registerTheme('dark', dark);\r\n        ctrl.map = echarts.init(container[0], 'dark');//使用echart官方主题\r\n\r\n        console.log('ctrl.data:' + JSON.stringify(ctrl.data));\r\n\r\n        //在Echart_Ctrl的data，\r\n        // console.log('code:'+codetText);\r\n        // console.log('chartMode:'+chartMode);\r\n        // console.log('**************'+JSON.stringify(ctrl.data));//传入ctrl的datalist 查询到的所有数据\r\n\r\n\r\n        var lastData = [];//最后时刻数据\r\n        var allData = [];//全部value time [[[v,t],[v,t],[v,t]...],[[v,t],[v,t],[v,t]...]]\r\n        var legend = [];//每个查询名称\r\n\r\n        //处理查询数据库得到的数据\r\n        if (ctrl.data && ctrl.data.length > 0) {\r\n            ctrl.data.forEach((serie) => {\r\n                const lastPoint = serie.datapoints[serie.datapoints.length - 1];  //最后时刻点[value,time]\r\n                var lastValue;\r\n                if (decimal >= 0 && decimal < 20) {\r\n                    lastValue = _.isArray(lastPoint) ? parseFloat(parseFloat(lastPoint[0]).toFixed(decimal)) : null; //最后时刻value\r\n                } else {\r\n                    lastValue = _.isArray(lastPoint) ? lastPoint[0] : null; //最后时刻value\r\n                }\r\n\r\n                const lastTime = _.isArray(lastPoint) ? lastPoint[1] : null; //最后时刻time\r\n\r\n                const target = serie.target;//查询的名称，查询页面可设置\r\n\r\n                lastData.push({ \"value\": lastValue == null ? 100 : lastValue, \"time\": lastTime, \"name\": target }); //每个serie装一对值和时间\r\n                legend.push(target);\r\n                allData.push(serie.datapoints);//每个查询一个数组\r\n            });\r\n        }\r\n\r\n        var valueList = [];//每个查询的值\r\n        var timeList = [];//每个查询的时刻\r\n\r\n        //装到值数组和时间数组\r\n        allData.forEach((serie) => {\r\n            const tempValue = [];\r\n            const tempTime = [];\r\n\r\n            serie.forEach((kv) => {\r\n                tempTime.push(new Date(kv[1]).toLocaleString());\r\n                if (decimal >= 0 && decimal < 20) {\r\n                    tempValue.push(parseFloat(parseFloat(kv[0]).toFixed(decimal)));\r\n                } else {\r\n                    tempValue.push(kv[0]);\r\n                }\r\n            });\r\n            valueList.push(tempValue);\r\n            timeList.push(tempTime);\r\n        });\r\n\r\n        console.log('lastdata:' + JSON.stringify(lastData));\r\n        console.log('legend:' + JSON.stringify(legend));\r\n        console.log('valueList:' + JSON.stringify(valueList));\r\n        console.log('timeList:' + JSON.stringify(timeList));\r\n\r\n        var pieSer = [];//饼图series中的data\r\n        lastData.forEach((data) => {\r\n            pieSer.push({\r\n                value: data['value'],\r\n                name: data['name']\r\n            });\r\n        });\r\n\r\n        var lineSer = [];//折线用的series\r\n        for (var i = 0; i < legend.length; i++) {\r\n            var tempDic = {\r\n                name: legend[i],\r\n                type: 'line',\r\n                stack: '',\r\n                data: valueList[i],\r\n                areaStyle: ctrl.panel.areaStyle.values ? {} : null,//颜色填充\r\n                label: {                     //数值标签\r\n                    normal: {\r\n                        show: ctrl.panel.showLabel.values,\r\n                        position: 'top'\r\n                    }\r\n                },\r\n            };\r\n            lineSer.push(tempDic);\r\n        }\r\n\r\n\r\n\r\n        //饼图\r\n        var optionPie = {\r\n            title: {\r\n                text: '',\r\n                subtext: '',\r\n                x: 'center'\r\n            },\r\n            tooltip: {\r\n                trigger: 'item',\r\n                formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n            },\r\n            legend: {\r\n                type: 'scroll',\r\n                orient: orient,\r\n                left:postion,\r\n                data: legend,\r\n\r\n                selected: legend\r\n            },\r\n            series: [\r\n                {\r\n                    name: '占用',\r\n                    type: 'pie',\r\n                    radius: '55%',\r\n                    center: ['50%', '50%'],\r\n                    data: pieSer,\r\n                    itemStyle: {\r\n                        emphasis: {\r\n                            shadowBlur: 10,\r\n                            shadowOffsetX: 0,\r\n                            shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        };\r\n\r\n        //折线图\r\n        var optionLine = {\r\n            title: {\r\n                text: '',\r\n                textStyle: {\r\n                    color: '#ccc'\r\n                }\r\n            },\r\n            tooltip: {\r\n                trigger: 'axis',\r\n                axisPointer: {\r\n                    type: 'cross',\r\n                    label: {\r\n                        backgroundColor: '#6a7985'\r\n                    }\r\n                }\r\n            },\r\n            legend: {\r\n                // data:['邮件营销','联盟广告','视频广告','直接访问','搜索引擎']\r\n                data: legend\r\n            },\r\n            grid: {\r\n                left: '3%',\r\n                right: '4%',\r\n                bottom: '3%',\r\n                containLabel: true\r\n            },\r\n            toolbox: {\r\n                feature: {\r\n                    saveAsImage: {}\r\n                }\r\n            },\r\n            xAxis: {\r\n                type: 'category',\r\n                boundaryGap: false,\r\n                // data: ['周一','周二','周三','周四','周五','周六','周日']\r\n                data: timeList[0]\r\n            },\r\n            yAxis: {\r\n                type: 'value'\r\n            },\r\n            series: lineSer\r\n        };\r\n\r\n        //雷达图\r\n        var optionRadar = {\r\n            title: {\r\n                text: ''\r\n            },\r\n            tooltip: {\r\n                trigger: 'axis'\r\n            },\r\n            legend: {\r\n                x: 'right',\r\n                data: ['某软件', '某主食手机', '某水果手机', '某国产手机'],\r\n                orient: orient,\r\n                left:postion,\r\n\r\n            },\r\n\r\n            //底环\r\n            radar: [\r\n                {\r\n                    indicator: [\r\n                        { text: '品牌', max: 100 },\r\n                        { text: '内容', max: 100 },\r\n                        { text: '可用性', max: 100 },\r\n                        { text: '功能', max: 100 },\r\n                        { text: '创新', max: 100 }\r\n                    ],\r\n                    center: ['50%', '50%'],\r\n                    radius: 120\r\n\r\n                },\r\n                // {\r\n                //     indicator: [\r\n                //         {text: '外观', max: 100},\r\n                //         {text: '拍照', max: 100},\r\n                //         {text: '系统', max: 100},\r\n                //         {text: '性能', max: 100},\r\n                //         {text: '屏幕', max: 100},\r\n                //         {text: '发热', max: 100},\r\n                //         {text: '待机', max: 100},\r\n                //     ],\r\n                //     radius: 160,\r\n                //     center: ['75%','50%'],\r\n                // },\r\n            ],\r\n\r\n\r\n            //数据\r\n            series: [\r\n                {\r\n                    type: 'radar',\r\n                    tooltip: {\r\n                        trigger: 'item'\r\n                    },\r\n                    itemStyle: { normal: { areaStyle: { type: 'default' } } },\r\n                    data: [\r\n                        {\r\n                            value: [60, 73, 85, 60, 39],\r\n                            name: '某软件'\r\n                        }\r\n                    ]\r\n                },\r\n                // {\r\n                //     type: 'radar',\r\n\r\n                //     radarIndex: 1,\r\n                //     data: [\r\n                //         {\r\n                //             value: [50, 80, 90, 95, 65,100,70],\r\n                //             name: '某主食手机'\r\n                //         },\r\n                //         {\r\n                //             value: [95, 80, 95, 90, 93,80,60],\r\n                //             name: '某水果手机'\r\n                //         },\r\n                //         {\r\n                //             value: [85, 95, 90, 90, 80,90,85],\r\n                //             name: '某国产手机'\r\n                //         }\r\n                //     ]\r\n                // },\r\n\r\n            ]\r\n        };\r\n\r\n        var optionMap={\r\n\r\n        }\r\n\r\n        //横向柱状图\r\n        var optionBar={\r\n            tooltip : {\r\n                trigger: 'axis',\r\n                axisPointer : {            // 坐标轴指示器，坐标轴触发有效\r\n                    type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\r\n                }\r\n            },\r\n            legend: {\r\n                data: ['直接访问', '邮件营销','联盟广告','视频广告','搜索引擎'],\r\n                orient: orient,\r\n                left:postion,\r\n            },\r\n            grid: {\r\n                left: '3%',\r\n                right: '4%',\r\n                bottom: '3%',\r\n                containLabel: true\r\n            },\r\n            xAxis:  {\r\n                type: 'value'\r\n            },\r\n            yAxis: {\r\n                type: 'category',\r\n                data: ['周一','周二','周三','周四','周五','周六','周日']\r\n            },\r\n            series: [\r\n                {\r\n                    name: '直接访问',\r\n                    type: 'bar',\r\n                    stack: '总量',\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            position: 'insideRight'\r\n                        }\r\n                    },\r\n                    data: [320, 302, 301, 334, 390, 330, 320]\r\n                },\r\n                {\r\n                    name: '邮件营销',\r\n                    type: 'bar',\r\n                    stack: '总量',\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            position: 'insideRight'\r\n                        }\r\n                    },\r\n                    data: [120, 132, 101, 134, 90, 230, 210]\r\n                },\r\n                {\r\n                    name: '联盟广告',\r\n                    type: 'bar',\r\n                    stack: '总量',\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            position: 'insideRight'\r\n                        }\r\n                    },\r\n                    data: [220, 182, 191, 234, 290, 330, 310]\r\n                },\r\n                {\r\n                    name: '视频广告',\r\n                    type: 'bar',\r\n                    stack: '总量',\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            position: 'insideRight'\r\n                        }\r\n                    },\r\n                    data: [150, 212, 201, 154, 190, 330, 410]\r\n                },\r\n                {\r\n                    name: '搜索引擎',\r\n                    type: 'bar',\r\n                    stack: '',\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            position: 'insideRight'\r\n                        }\r\n                    },\r\n                    data: [820, 832, 901, 934, 1290, 1330, 1320]\r\n                }\r\n            ]\r\n        }\r\n\r\n        //自定义代码\r\n        var optionCus = codetText ? JSON.parse(codetText) : null;\r\n\r\n\r\n        //选图表类型，页面上可选 editor.tml中\r\n        let option = {};\r\n        switch (chartMode) {\r\n            case 'line':\r\n                option = optionLine;\r\n                break;\r\n            case 'pie':\r\n                option = optionPie;\r\n                break;\r\n            case 'radar':\r\n                option = optionRadar;\r\n                break;\r\n            case 'map':\r\n                option=optionMap;\r\n                break;\r\n            case 'bar':\r\n                option=optionBar;\r\n                break;\r\n            \r\n            case 'custom'://自定义的内容，按照编写的json格式\r\n                option = optionCus;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n\r\n\r\n        //清除原图表以刷新\r\n        ctrl.map.clear();\r\n        ctrl.map.setOption(option);\r\n\r\n        var opts = {\r\n            width: 'auto',\r\n            height: ctrl.height,\r\n            silent: false\r\n        }\r\n\r\n        ctrl.map.resize(opts);\r\n\r\n\r\n        /*\r\n        if (ctrl.mapCenterMoved) ctrl.map.panToMapCenter();\r\n    \r\n        if (!ctrl.map.legend && ctrl.panel.showLegend) ctrl.map.createLegend();\r\n    \r\n        ctrl.map.drawCircles();\r\n        */\r\n\r\n    }\r\n}"]}